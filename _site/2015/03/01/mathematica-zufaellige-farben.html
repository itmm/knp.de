<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>knp.de &ndash; Zufällige Farben mit Mathematica</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="/css/syntax.css">
    <link rel="stylesheet" href="/css/main.css">
  </head>
  <body>
    <div class="header"><div class="indent">
      <h1 class="title"><a href="/">knp.de</a></h1>
      &ndash; Zufällige Farben mit Mathematica
    </div></div>
    <div class="indent content">
          <h2>Zufällige Farben mit Mathematica</h2>
<p class="meta">03/01/2015</p>
<div class="post">
<p>Dieses Jahr habe ich mir vorgenommen, Mathematica zu erlernen. In diesem Blog gibt es kleine Erkenntnisse.</p>

<p>In diesem ersten Versuch habe ich probiert eine Stelle aus dem Einführungsvideo nachzubauen: ein Foto von der Kamera wird aufgenommen und mit kleinen Kästchen in zufälligen Farben hinterlegt.</p>

<h3>Das Bild aufnehmen</h3>

<p>Das Bild aufzunehmen ist einfach:</p>
<div class="highlight"><pre><code class="language-mathematica" data-lang="mathematica"><span class="n">CurrentImage</span><span class="p">[]</span><span class="w"></span>
</code></pre></div>
<p>Das Ergebnis ist ein farbiges Foto:</p>

<p><img src="/images/mth_shot.png" alt="ursprüngliches Foto"></p>

<p>Damit die zufälligen Farben besser zur Geltung kommen, soll das Bild zunächst in Graustufen umgerechnet werden:</p>
<div class="highlight"><pre><code class="language-mathematica" data-lang="mathematica"><span class="n">ColorConvert</span><span class="p">[</span><span class="err">%</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Grayscale&quot;</span><span class="p">]</span><span class="w"></span>
</code></pre></div>
<p>Das Ergebnis ist entsprechend:</p>

<p><img src="/images/mth_shot_grey.png" alt="Foto in Graustufen"></p>

<p>Um später das Bild mit zufälligen Farben anzureichen, muss das Ergebnis wieder in den RGB-Farbraum umgewandelt werden:</p>
<div class="highlight"><pre><code class="language-mathematica" data-lang="mathematica"><span class="n">ColorConvert</span><span class="p">[</span><span class="err">%</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;RGB&quot;</span><span class="p">];</span><span class="w"></span>
</code></pre></div>
<p>Durch das Semikolon am Ende wird verhindert, dass das Foto erneut ausgegeben wird (es hat sich ja sichtbar nichts geändert).</p>

<h3>Das Bild zerlegen und einfärben</h3>

<p>Mit dem folgenden Befehl kann ein Bild in Teilbilder unterteilt werden. Jedes Bild ist 20 Pixel breit und hoch:</p>
<div class="highlight"><pre><code class="language-mathematica" data-lang="mathematica"><span class="n">ImagePartition</span><span class="p">[</span><span class="err">%</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">]</span><span class="w"></span>
</code></pre></div>
<p><img src="/images/mth_shot_split.png" alt="zerlegtes Bild"></p>

<p>Um die Teilbilder zufällig einzufärben, werden zufällig drei Farbanteile ermittelt (rot, grün und blau) und die Pixel der Bilder mit den entsprechenden Werten multipliziert:</p>
<div class="highlight"><pre><code class="language-mathematica" data-lang="mathematica"><span class="n">Map</span><span class="p">[</span><span class="n">ImageMultiply</span><span class="p">[</span><span class="nv">#</span><span class="p">,</span><span class="w"> </span><span class="n">RandomReal</span><span class="p">[{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w"> </span><span class="mi">3</span><span class="p">]]</span><span class="w"> </span><span class="o">&amp;</span><span class="p">,</span><span class="w"> </span><span class="err">%</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="mi">2</span><span class="p">}]</span><span class="w"></span>
</code></pre></div>
<p><img src="/images/mth_shot_color.png" alt="eingefärbte Teilbilder"></p>

<h3>Bild zusammensetzen</h3>

<p>Das Zusammensetzen kann ebenfalls mit einem einzigen Befehl erreicht werden:</p>
<div class="highlight"><pre><code class="language-mathematica" data-lang="mathematica"><span class="n">ImageAssemble</span><span class="p">[</span><span class="err">%</span><span class="p">]</span><span class="w"></span>
</code></pre></div>
<p><img src="/images/mth_shot_combine.png" alt="zusammengesetztes Bild"></p>

<p>Das zusammengesetzte Bild kann mit <code>Export</code> gespeichert werden.</p>

</div>
<hr/>
<h3>Comments</h3>
<p>Would you like to correct, expand or correct an entry? Please
send an e-mail to
<a href="ma&#105;lto&#58;timm&#64;knp&#46;de">timm&#64;knp&#46;de</a>.
I&nbsp;will gladly publish interesting contributions on this site.

    </div>
    <div class="footer"><div class="indent">
      &copy; 2015 Timm Knape &ndash; 
      <a href="ma&#105;lto&#58;timm&#64;knp&#46;de">timm&#64;knp&#46;de</a> &ndash; 
      <a href="http://www.kna-st.de/contact.html">Contact</a> &ndash;
      <a href="http://www.kna-st.de/about.html">About/Impressum</a>
    </div></div>
  </body>
</html>
